<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kado Ulang Tahun</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    .fade {
      animation: fadeIn 0.8s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    /* Canvas partikel full screen */
    #loveCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: black;
      z-index: 10;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-pink-200 via-purple-200 to-yellow-100">

  <div id="slides" class="w-full min-h-screen flex flex-col items-center justify-center">

    <!-- SLIDE 1 -->
    <div class="slide text-center space-y-4" id="slide1">
      <div class="bg-white shadow-xl rounded-2xl p-5 max-w-sm mx-auto">
        <h1 class="text-xl font-bold text-pink-600 mb-3">Hii pacarrkuu üíñ</h1>
        <p class="text-base text-gray-700 mb-1">aku punya sesuatuu nihh üéÅ</p>
        <p class="text-base text-gray-700 mb-3">penasarannn gakk? üòÜ</p>
        <button onclick="nextSlide()" class="px-4 py-2 bg-pink-500 text-white rounded-xl shadow hover:bg-pink-600 transition text-sm">
          Coba buka ‚û°Ô∏è
        </button>
      </div>
    </div>

    <!-- SLIDE 2 -->
    <div class="slide hidden flex flex-col items-center space-y-4" id="slide2">
      <img src="and1.jpg" alt="Foto Pacar"
           class="rounded-2xl border-2 border-pink-400 mb-3 w-48 sm:w-56 md:w-64"/>
      <div class="min-h-[200px] w-full max-w-xl px-3">
        <p id="text2" class="text-base font-semibold text-pink-700 mx-auto text-center"></p>
      </div>
      <button id="btn2" onclick="nextSlide()" 
              class="px-4 py-2 bg-purple-500 text-white rounded-xl shadow hover:bg-purple-600 transition text-sm hidden">
        Lanjutin yaa ‚û°Ô∏è
      </button>
    </div>

    <!-- SLIDE 3 -->
    <div class="slide hidden flex flex-col items-center space-y-4" id="slide3">
      <img src="and3.jpg" alt="Foto Pacar"
           class="rounded-2xl border-2 border-pink-400 mb-3 w-48 sm:w-56 md:w-64"/>
      <div class="min-h-[200px] w-full max-w-xl px-3">
        <p id="text3" class="text-base font-semibold text-purple-700 mx-auto text-center"></p>
      </div>
      <button id="btn3" onclick="nextSlide()" 
              class="px-4 py-2 bg-pink-500 text-white rounded-xl shadow hover:bg-pink-600 transition text-sm hidden">
        Lanjut, masih kuat kann? ‚û°Ô∏è
      </button>
    </div>

    <!-- SLIDE 4 -->
    <div class="slide hidden flex flex-col items-center space-y-4" id="slide4">
      <img src="and4.jpg" alt="Foto Pacar"
           class="rounded-2xl border-2 border-purple-400 mb-3 w-52 sm:w-60 md:w-72"/>
      <div class="min-h-[200px] w-full max-w-xl px-3">
        <p id="text4" class="text-base font-semibold text-pink-700 mx-auto text-center"></p>
      </div>
      <button id="btn4" onclick="nextSlide()" 
              class="px-4 py-2 bg-purple-500 text-white rounded-xl shadow hover:bg-purple-600 transition text-sm hidden">
        Terakhir nihh üéâ
      </button>
    </div>

    <!-- SLIDE 5 (GIF Kue Ulang Tahun) -->
    <div class="slide hidden flex flex-col items-center space-y-4" id="slide5">
      <img src="birthday-6_256.gif" alt="Birthday Cake" onclick="nextSlide()"
           class="rounded-2xl shadow-lg mb-3 w-64 sm:w-72 md:w-80 cursor-pointer"/>
      <div class="min-h-[200px] w-full max-w-xl px-3">
        <p id="text5" class="text-lg font-bold text-pink-700 mx-auto text-center"></p>
      </div>
    </div>

    <!-- SLIDE 6 (Canvas Love) -->
    <div class="slide hidden" id="slide6">
      <canvas id="loveCanvas"></canvas>
    </div>

  </div>

  <script>
    let currentSlide = 1;
    const totalSlides = 6;

    function showSlide(n) {
      document.querySelectorAll(".slide").forEach((slide, index) => {
        slide.classList.add("hidden");
        if (index === n - 1) {
          slide.classList.remove("hidden");
          slide.classList.add("fade");
        }
      });
    }

    function nextSlide() {
      if (currentSlide < totalSlides) {
        currentSlide++;
        showSlide(currentSlide);
        if (currentSlide === 2) { i2 = 0; typeWriter2(); }
        if (currentSlide === 3) { i3 = 0; typeWriter3(); }
        if (currentSlide === 4) { i4 = 0; typeWriter4(); }
        if (currentSlide === 5) { i5 = 0; typeWriter5(); }
        if (currentSlide === 6) { startLoveParticles(); }
      }
    }

    // Slide 2 typing
    const text2 = "Kamuu kenall ini nggak? Inii pacarr akuu, diaa yang menemani aku dalam kondisi apapunn itu, meskipun aku sering buat dia marah tapi dia tetap sabar dan mau memaafkan. Diaa adalah wanita lucuu, selalu riang gembira dan penyayang walau kadang ia sering menangis karena masalah tertentu, namun tidak apa apa. Hal ituu wajar untuk seorang wanita dan itu juga menjadi tugasku untuk menenangkanya.";
    let i2 = 0;
    function typeWriter2() {
      const p = document.getElementById("text2");
      const btn = document.getElementById("btn2");
      if (i2 === 0) p.innerHTML = "";
      if (i2 < text2.length) {
        p.innerHTML += text2.charAt(i2);
        i2++;
        setTimeout(typeWriter2, 40);
      } else {
        btn.classList.remove("hidden");
      }
    }

    // Slide 3 typing
    const text3 = "Lihat inii...... Lucu kann, wajahnya imutt, manisss, seneng bangett bisa ngemilikin kamuu. Aku barusan aja belajar biologi tauu, katanya kamu itu adalah 7% darah, 70% air, 99% ruang hampa. Tapi sih yaa kalau menurut aku kamu ituu 100% kesayangan kuu. üíï";
    let i3 = 0;
    function typeWriter3() {
      const p = document.getElementById("text3");
      const btn = document.getElementById("btn3");
      if (i3 === 0) p.innerHTML = "";
      if (i3 < text3.length) {
        p.innerHTML += text3.charAt(i3);
        i3++;
        setTimeout(typeWriter3, 40);
      } else {
        btn.classList.remove("hidden");
        setTimeout(() => { fireConfetti(); }, 500);
      }
    }

    // Slide 4 typing
    const text4 = "Tapi tahu nggak sayang? Dari semua hal di dunia ini, yang paling berharga buat aku itu bukan harta, bukan barang mewah, tapi kamuu. Karena kamu adalah alasan aku terus semangat setiap harinya, tempat aku pulang, dan sosok yang selalu aku jaga selamanya. üíû";
    let i4 = 0;
    function typeWriter4() {
      const p = document.getElementById("text4");
      const btn = document.getElementById("btn4");
      if (i4 === 0) p.innerHTML = "";
      if (i4 < text4.length) {
        p.innerHTML += text4.charAt(i4);
        i4++;
        setTimeout(typeWriter4, 40);
      } else {
        btn.classList.remove("hidden");
      }
    }

    // Slide 5 typing
    const text5 = "Selamat ulang tahun cintakuu üéÇüíñ Semoga semua harapanmu tercapai, sehat selalu, panjang umur, dan tetap jadi kesayangan akuu sampai tua nanti. Aku beruntung banget bisa milikin kamu. Love youu more than anything! üíù";
    let i5 = 0;
    function typeWriter5() {
      const p = document.getElementById("text5");
      if (i5 === 0) p.innerHTML = "";
      if (i5 < text5.length) {
        p.innerHTML += text5.charAt(i5);
        i5++;
        setTimeout(typeWriter5, 40);
      } else {
        setTimeout(() => { fireConfetti(); }, 500);
      }
    }

    // Confetti
    function fireConfetti() {
      var end = Date.now() + 1500;
      (function frame() {
        confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 } });
        confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 } });
        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      })();
    }

    // Slide 6 - Partikel Love
    function startLoveParticles() {
      const canvas = document.getElementById("loveCanvas");
      const ctx = canvas.getContext("2d");
      resizeCanvas();

      let particles = [];
      const totalParticles = 800;

      // bentuk love responsif
      function heartFunction(t, scale) {
        return {
          x: 16 * Math.pow(Math.sin(t), 3) * scale,
          y: -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t)) * scale
        };
      }

      // generate target koordinat berbentuk love
      const heartPoints = [];
      const scale = Math.min(canvas.width, canvas.height) / 40;
      for (let i = 0; i < totalParticles; i++) {
        const t = Math.random() * Math.PI * 2;
        const point = heartFunction(t, scale);
        heartPoints.push({
          x: canvas.width/2 + point.x,
          y: canvas.height/2 + point.y
        });
      }

      // generate partikel awal random
      for (let i = 0; i < totalParticles; i++) {
        particles.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          tx: heartPoints[i].x,
          ty: heartPoints[i].y,
          size: 2 + Math.random()*2,
          color: `hsl(${Math.random()*360},80%,60%)`,
          progress: 0
        });
      }

      let startTime = null;
      function animate(timestamp) {
        if (!startTime) startTime = timestamp;
        const elapsed = (timestamp - startTime) / 1000; // detik

        ctx.clearRect(0, 0, canvas.width, canvas.height);

        particles.forEach(p => {
          let t = Math.min(elapsed / 10, 1); // 10 detik durasi
          p.x = p.x + (p.tx - p.x) * t * 0.02;
          p.y = p.y + (p.ty - p.y) * t * 0.02;
          ctx.fillStyle = p.color;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.size, 0, Math.PI*2);
          ctx.fill();
        });

        requestAnimationFrame(animate);
      }
      requestAnimationFrame(animate);

      window.addEventListener("resize", resizeCanvas);
      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
    }

    showSlide(currentSlide);
  </script>
</body>
</html>
